Renata Limbranata, la mogliettina del nostro vecchio amico Ciccio Pasticcio, ha di recente iniziato
a frequentare un esclusivo circolo tennistico alle porte di Pasticciopoli. È tutta presa dalla
sua nuova passione, e questo lascia a Ciccio un po’ di tregua... o almeno così credeva lui! Infatti,la 
nuova direttrice tecnica del circolo, Fiammetta Laracchetta, ha in mente un nuovo sistema di allenamento
piuttosto complesso, che richiede la formazione di squadre e di accoppiamenti tra i soci.
Poteva Renata non chiamare in causa il suo adorato marito? Ovviamente no, e pertanto ora ci tocca aiutare
Ciccio a scrivere un programma ASP che si occupi di ottenere quanto indicato di seguito.

•Ogni giocatore deve essere assegnato ad una squadra. Il numero di squadre massimo è noto all’inizio. 
Si tenga presente che il numero di squadre create può essere minore di quello massimo (cioè non tutte 
le squadre devono per forza avere dei giocatori assegnati, mentre ogni giocatore deve finire esattamente 
in una squadra).
assegno(X,T)|notAssegno(X,T):-persona(X),team(T).
:-persona(X),notAssegno(X,T).
:-persona(X),assegno(X,T1),assegno(X,T2).


•Se un team non è vuoto, allora deve contenere giocatori di entrambi i sessi.
entrambiSessi(T):-team(T),persona(X,1,_),persona(X1,2,_),X1!=X2,assegno(X,T),assegno(X1,T).
:-team(T),#count{P:assegno(P,T)}>1, not entrambiSessi(T).



•Un primo desiderio, il meno importante di tutti, è che la forza complessiva(cioè la somma delle forze 
di ciascun membro) delle squadre sia bilanciata. In altri termini, date le forze complessive di due 
qualunque tra le squadre formate, se ne vuole minimizzare la differenza.
sommaForza(T,K) :- #sum{F: persona(X,_,F), assegno(X,T)}=K,team(T).
differenza(T1,T2,V) :- 
:tilde sommaForza(T),team(T)


•La formula dell’allenamento prevede che ciascun team giochi esattamente contro un altro, e che i tutti 
membri di un team giochino contro tutti quelli del team accoppiato. Si devono per tanto stabilire gli 
accoppiamenti tra i team.
:-assegno(X,T1),assegno(Y,T2),



•Sono note delle statistiche calcolate sullo storico degli allenamenti nel circolo; in particolare, 
si ha un grafo orientato pesatoi cui nodi sono i giocatori, e in cui esiste un arco <a,b,wa> se il 
giocatore “a” ha vinto “wa” incontri giocando contro il giocatore “b”; in questo caso, esisterà sempre 
anche un arco <b,a,wb> che indica quante volte il giocatore “b” ha battuto il giocatore “a”. “wb+wa” è 
il numero totale di incontri tra “a” e “b”. Pertanto, se due giocatori non hanno mai giocato, non ci sono 
archi tra loro; altrimenti c’è sempre una coppia di archi come quelli descritti (si noti che qualche arco 
potrebbe avere peso pari a zero, se uno dei giocatori non ha mai battuto l’altro).

•Nello stabilire gli accoppiamenti:
    o la cosa più importante è massimizzare il numero di incontri che si verificheranno tra giocatori che non si sono 
mai incontrati prima;
    o se due giocatori che dovranno giocare a causa dell’accoppiamento 
tra i team si sono già incontrati in precedenza, si vuole minimizzare la differenza tra le mutue vittorie.


•Al fine di arricchire le statistiche, si desidera inoltre calcolare il numero totale di incontri già disputati 
tra gli accoppiamenti che si sono venuti a creare con le nostre scelte.