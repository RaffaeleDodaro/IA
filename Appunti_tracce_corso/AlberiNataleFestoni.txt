% == == == == == == == == == == == == == == == == == == == == == == == == == == == 
% ALBERI DI NATALE E FESTONI
% In un centro commerciale ci sono una serie di alberi 
% di Natale che devono essere addobbati, avendo a disposizione 
% un certo numero di festoni di vari colori. Scrivere un 
% programma DLV che distribuisca i festoni per i vari alberi, 
% sapendo che:
% - ciascun festone puo stare su un solo albero;
% - per evitare alberi spogli, ciascun albero deve avere 
% almeno 2 festoni;

% Modello dei dati in input: 
% albero(A).  <-  Gli alberi da addobbare
% adiacenti(A1,A2) <- Indica che gli alberi A1 e A2 sono adiacenti.
% festone(F1,C). <- I festoni a disposizione 
%                   (F1=identificatore,C=colore)

albero(1..3).

nFestone(1..6).

colore(rosso). colore(verde). colore(blu).
colore(bianco). colore(giallo). colore(arancio).

festone(X,C)|nonFestone(X,C):-nFestone(X),colore(C).
%un festone può avere un solo colore
:-festone(X,C1),festone(X,C2),C1!=C2.
%un colore può essere associato solo ad un festone
:-festone(X1,C),festone(X2,C),X1!=X2.


addobbo(X,Y)|nonAddobbo(X,Y):-albero(X),festone(Y,_).

% - ciascun festone puo stare su un solo albero;
:-festone(Y,_), not #count{X:addobbo(X,Y)}=1.


% - per evitare alberi spogli, ciascun albero deve avere 
% almeno 2 festoni;
:-albero(X),#count{Y : addobbo(X,Y)}<2.